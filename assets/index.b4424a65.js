const Ce=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}};Ce();function I(){}function Ie(e){return e&&typeof e=="object"&&typeof e.then=="function"}function me(e){return e()}function fe(){return Object.create(null)}function A(e){e.forEach(me)}function be(e){return typeof e=="function"}function re(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Le(e){return Object.keys(e).length===0}function p(e,t){e.appendChild(t)}function j(e,t,n){e.insertBefore(t,n||null)}function w(e){e.parentNode.removeChild(e)}function Pe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function _(e){return document.createElement(e)}function x(e){return document.createTextNode(e)}function L(){return x(" ")}function M(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function v(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Se(e){return Array.from(e.childNodes)}function te(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function D(e,t){e.value=t==null?"":t}function Ue(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function F(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t){r.selected=!0;return}}e.selectedIndex=-1}function de(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function Me(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(e,n,r,t),l}let R;function S(e){R=e}function ve(){if(!R)throw new Error("Function called outside component initialization");return R}function ye(){const e=ve();return(t,n,{cancelable:r=!1}={})=>{const l=e.$$.callbacks[t];if(l){const o=Me(t,n,{cancelable:r});return l.slice().forEach(a=>{a.call(e,o)}),!o.defaultPrevented}return!0}}const V=[],N=[],K=[],ne=[],xe=Promise.resolve();let le=!1;function Oe(){le||(le=!0,xe.then(oe))}function H(e){K.push(e)}function Y(e){ne.push(e)}const Z=new Set;let G=0;function oe(){const e=R;do{for(;G<V.length;){const t=V[G];G++,S(t),Ae(t.$$)}for(S(null),V.length=0,G=0;N.length;)N.pop()();for(let t=0;t<K.length;t+=1){const n=K[t];Z.has(n)||(Z.add(n),n())}K.length=0}while(V.length);for(;ne.length;)ne.pop()();le=!1,Z.clear(),S(e)}function Ae(e){if(e.fragment!==null){e.update(),A(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(H)}}const Q=new Set;let O;function we(){O={r:0,c:[],p:O}}function ke(){O.r||A(O.c),O=O.p}function B(e,t){e&&e.i&&(Q.delete(e),e.i(t))}function J(e,t,n,r){if(e&&e.o){if(Q.has(e))return;Q.add(e),O.c.push(()=>{Q.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function pe(e,t){const n=t.token={};function r(l,o,a,u){if(t.token!==n)return;t.resolved=u;let f=t.ctx;a!==void 0&&(f=f.slice(),f[a]=u);const s=l&&(t.current=l)(f);let c=!1;t.block&&(t.blocks?t.blocks.forEach((i,d)=>{d!==o&&i&&(we(),J(i,1,1,()=>{t.blocks[d]===i&&(t.blocks[d]=null)}),ke())}):t.block.d(1),s.c(),B(s,1),s.m(t.mount(),t.anchor),c=!0),t.block=s,t.blocks&&(t.blocks[o]=s),c&&oe()}if(Ie(e)){const l=ve();if(e.then(o=>{S(l),r(t.then,1,t.value,o),S(null)},o=>{if(S(l),r(t.catch,2,t.error,o),S(null),!t.hasCatch)throw o}),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}}function Ne(e,t,n){const r=t.slice(),{resolved:l}=e;e.current===e.then&&(r[e.value]=l),e.current===e.catch&&(r[e.error]=l),e.block.p(r,n)}function ee(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function je(e){e&&e.c()}function se(e,t,n,r){const{fragment:l,on_mount:o,on_destroy:a,after_update:u}=e.$$;l&&l.m(t,n),r||H(()=>{const f=o.map(me).filter(be);a?a.push(...f):A(f),e.$$.on_mount=[]}),u.forEach(H)}function ue(e,t){const n=e.$$;n.fragment!==null&&(A(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Be(e,t){e.$$.dirty[0]===-1&&(V.push(e),Oe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ie(e,t,n,r,l,o,a,u=[-1]){const f=R;S(e);const s=e.$$={fragment:null,ctx:null,props:o,update:I,not_equal:l,bound:fe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:fe(),dirty:u,skip_bound:!1,root:t.target||f.$$.root};a&&a(s.root);let c=!1;if(s.ctx=n?n(e,t.props||{},(i,d,...b)=>{const h=b.length?b[0]:d;return s.ctx&&l(s.ctx[i],s.ctx[i]=h)&&(!s.skip_bound&&s.bound[i]&&s.bound[i](h),c&&Be(e,i)),d}):[],s.update(),c=!0,A(s.before_update),s.fragment=r?r(s.ctx):!1,t.target){if(t.hydrate){const i=Se(t.target);s.fragment&&s.fragment.l(i),i.forEach(w)}else s.fragment&&s.fragment.c();t.intro&&B(e.$$.fragment),se(e,t.target,t.anchor,t.customElement),oe()}S(f)}class ae{$destroy(){ue(this,1),this.$destroy=I}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(t){this.$$set&&!Le(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function He(e){let t,n,r,l,o,a,u,f,s,c,i,d,b,h,T,E,C,y,q,m,$,P,U,W,z,X,ce;return{c(){t=_("p"),n=_("label"),r=x(`env:
  `),l=_("select"),o=_("option"),o.textContent="demo",a=L(),u=_("label"),f=x(`role:
`),s=_("select"),c=_("option"),c.textContent="admin",i=_("option"),i.textContent="APP",d=_("option"),d.textContent="VBM",b=_("option"),b.textContent="VSP",h=L(),T=_("p"),E=_("label"),C=x(`email:
  `),y=_("input"),q=L(),m=_("p"),$=_("label"),P=x(`pass:
  `),U=_("input"),W=L(),z=_("button"),z.textContent="Log in",o.__value="https://api-demo.viewcorp.xyz/api",o.value=o.__value,v(l,"name","apiUrl"),v(l,"id","apiUrl"),e[0]===void 0&&H(()=>e[7].call(l)),c.__value="admin",c.value=c.__value,i.__value="APP",i.value=i.__value,d.__value="VBM",d.value=d.__value,b.__value="VSP",b.value=b.__value,v(s,"name","userRole"),v(s,"id","userRole"),e[3]===void 0&&H(()=>e[8].call(s))},m(g,k){j(g,t,k),p(t,n),p(n,r),p(n,l),p(l,o),F(l,e[0]),j(g,a,k),j(g,u,k),p(u,f),p(u,s),p(s,c),p(s,i),p(s,d),p(s,b),F(s,e[3]),j(g,h,k),j(g,T,k),p(T,E),p(E,C),p(E,y),D(y,e[1]),j(g,q,k),j(g,m,k),p(m,$),p($,P),p($,U),D(U,e[2]),j(g,W,k),j(g,z,k),X||(ce=[M(l,"change",e[7]),M(s,"change",e[8]),M(y,"input",e[9]),M(U,"input",e[10]),M(z,"click",e[4])],X=!0)},p(g,[k]){k&1&&F(l,g[0]),k&8&&F(s,g[3]),k&2&&y.value!==g[1]&&D(y,g[1]),k&4&&U.value!==g[2]&&D(U,g[2])},i:I,o:I,d(g){g&&w(t),g&&w(a),g&&w(u),g&&w(h),g&&w(T),g&&w(q),g&&w(m),g&&w(W),g&&w(z),X=!1,A(ce)}}}function qe(e,t,n){ye();let{loggedIn:r=!1}=t,{bearerToken:l}=t,{apiUrl:o="https://api-demo.viewcorp.xyz/api"}=t,a="",u="",f="VBM";function s(){let h={email:a,password:u,role:f};fetch(o+"/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).then(T=>T.json()).then(T=>{let E=T.data.access_token;n(6,l="Bearer "+E),n(5,r=!r),console.log(l)}),console.log(o,l)}function c(){o=de(this),n(0,o)}function i(){f=de(this),n(3,f)}function d(){a=this.value,n(1,a)}function b(){u=this.value,n(2,u)}return e.$$set=h=>{"loggedIn"in h&&n(5,r=h.loggedIn),"bearerToken"in h&&n(6,l=h.bearerToken),"apiUrl"in h&&n(0,o=h.apiUrl)},[o,a,u,f,s,r,l,c,i,d,b]}class ze extends ae{constructor(t){super(),ie(this,t,qe,He,re,{loggedIn:5,bearerToken:6,apiUrl:0})}}async function Te(e,t,n,r=null){let l={method:n,headers:{"Content-Type":"application/json",Authorization:t}};r&&(l.body=JSON.stringify(r));const o=await fetch(e,l);let u=await(await o.json()).data;if(o.ok)return console.log("data",u),u;throw new Error}async function $e(e,t){return Te(`${e}/v1/devices/spaces`,t,"GET")}async function Ee(e,t,n,r){return Te(`${e}/v1/devices/spaces/${t}`,n,"PATCH",r)}function Ve(e,t,n){return ye(),[$e,Ee]}class Je extends ae{constructor(t){super(),ie(this,t,Ve,null,re,{get_spaces:0,update_spaces:1})}get get_spaces(){return $e}get update_spaces(){return Ee}}function _e(e,t,n){const r=e.slice();return r[19]=t[n][0],r[20]=t[n][1],r[21]=t,r[22]=n,r}function Re(e){let t,n,r,l,o,a,u={ctx:e,current:null,token:null,hasCatch:!0,pending:Ke,then:Ge,catch:Fe,value:18,error:23};return pe(l=e[4],u),{c(){t=_("div"),n=_("button"),n.textContent="Save",r=L(),u.block.c(),v(n,"class","flex-child svelte-ejwh77")},m(f,s){j(f,t,s),p(t,n),p(t,r),u.block.m(t,u.anchor=null),u.mount=()=>t,u.anchor=null,o||(a=M(n,"click",e[7]),o=!0)},p(f,s){e=f,u.ctx=e,s&16&&l!==(l=e[4])&&pe(l,u)||Ne(u,e,s)},i:I,o:I,d(f){f&&w(t),u.block.d(),u.token=null,u=null,o=!1,a()}}}function De(e){let t,n,r,l,o;function a(c){e[10](c)}function u(c){e[11](c)}function f(c){e[12](c)}let s={};return e[0]!==void 0&&(s.loggedIn=e[0]),e[2]!==void 0&&(s.apiUrl=e[2]),e[1]!==void 0&&(s.bearerToken=e[1]),t=new ze({props:s}),N.push(()=>ee(t,"loggedIn",a)),N.push(()=>ee(t,"apiUrl",u)),N.push(()=>ee(t,"bearerToken",f)),t.$on("message",e[6]),{c(){je(t.$$.fragment)},m(c,i){se(t,c,i),o=!0},p(c,i){const d={};!n&&i&1&&(n=!0,d.loggedIn=c[0],Y(()=>n=!1)),!r&&i&4&&(r=!0,d.apiUrl=c[2],Y(()=>r=!1)),!l&&i&2&&(l=!0,d.bearerToken=c[1],Y(()=>l=!1)),t.$set(d)},i(c){o||(B(t.$$.fragment,c),o=!0)},o(c){J(t.$$.fragment,c),o=!1},d(c){ue(t,c)}}}function Fe(e){let t,n=e[23].message+"",r;return{c(){t=_("p"),r=x(n),Ue(t,"color","red"),v(t,"class","svelte-ejwh77")},m(l,o){j(l,t,o),p(t,r)},p(l,o){o&16&&n!==(n=l[23].message+"")&&te(r,n)},d(l){l&&w(t)}}}function Ge(e){let t,n,r,l,o=e[18].map(ge),a=[];for(let u=0;u<o.length;u+=1)a[u]=he(_e(e,o,u));return{c(){t=_("table"),n=_("thead"),n.innerHTML=`<tr class="svelte-ejwh77"><th class="svelte-ejwh77">Space</th> 
            <th class="svelte-ejwh77">Prev Target Lux</th> 
            <th class="svelte-ejwh77">New Target Lux</th></tr>`,r=L(),l=_("tbody");for(let u=0;u<a.length;u+=1)a[u].c();v(t,"class","styled-table flex-child svelte-ejwh77")},m(u,f){j(u,t,f),p(t,n),p(t,r),p(t,l);for(let s=0;s<a.length;s+=1)a[s].m(l,null)},p(u,f){if(f&304){o=u[18].map(ge);let s;for(s=0;s<o.length;s+=1){const c=_e(u,o,s);a[s]?a[s].p(c,f):(a[s]=he(c),a[s].c(),a[s].m(l,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=o.length}},d(u){u&&w(t),Pe(a,u)}}}function he(e){let t,n,r=e[20].name+"",l,o,a,u=e[20].lux_target+"",f,s,c,i,d,b,h,T;function E(){e[13].call(i,e[21],e[22])}return{c(){t=_("tr"),n=_("td"),l=x(r),o=L(),a=_("td"),f=x(u),c=L(),i=_("td"),b=L(),v(n,"class","svelte-ejwh77"),v(a,"style",s=`background-color: ${e[5](e[20].lux_target)}`),v(a,"class","svelte-ejwh77"),v(i,"contenteditable","true"),v(i,"style",d=`background-color: ${e[5](e[20].curr_lux_target)}`),v(i,"class","svelte-ejwh77"),e[20].curr_lux_target===void 0&&H(E),v(t,"class","svelte-ejwh77")},m(C,y){j(C,t,y),p(t,n),p(n,l),p(t,o),p(t,a),p(a,f),p(t,c),p(t,i),e[20].curr_lux_target!==void 0&&(i.innerHTML=e[20].curr_lux_target),p(t,b),h||(T=[M(i,"input",E),M(i,"input",function(){be(e[8](e[20],e[20].uniqueId))&&e[8](e[20],e[20].uniqueId).apply(this,arguments)})],h=!0)},p(C,y){e=C,y&16&&r!==(r=e[20].name+"")&&te(l,r),y&16&&u!==(u=e[20].lux_target+"")&&te(f,u),y&16&&s!==(s=`background-color: ${e[5](e[20].lux_target)}`)&&v(a,"style",s),y&16&&d!==(d=`background-color: ${e[5](e[20].curr_lux_target)}`)&&v(i,"style",d),y&16&&e[20].curr_lux_target!==i.innerHTML&&(i.innerHTML=e[20].curr_lux_target)},d(C){C&&w(t),h=!1,A(T)}}}function Ke(e){return{c:I,m:I,p:I,d:I}}function Qe(e){let t,n,r,l,o,a,u={};n=new Je({props:u}),e[9](n);const f=[De,Re],s=[];function c(i,d){return i[0]?1:0}return l=c(e),o=s[l]=f[l](e),{c(){t=_("main"),je(n.$$.fragment),r=L(),o.c(),v(t,"class","svelte-ejwh77")},m(i,d){j(i,t,d),se(n,t,null),p(t,r),s[l].m(t,null),a=!0},p(i,[d]){const b={};n.$set(b);let h=l;l=c(i),l===h?s[l].p(i,d):(we(),J(s[h],1,1,()=>{s[h]=null}),ke(),o=s[l],o?o.p(i,d):(o=s[l]=f[l](i),o.c()),B(o,1),o.m(t,null))},i(i){a||(B(n.$$.fragment,i),B(o),a=!0)},o(i){J(n.$$.fragment,i),J(o),a=!1},d(i){i&&w(t),e[9](null),ue(n),s[l].d()}}}const ge=(e,t)=>[t,e];function We(e,t,n){let r;const l=["#203060","#404c74","#606987","#80859b","#a0a1af","#c0bec2","#dfdad6","#e3ddd8","#e8e1db","#ece4dd","#f0e7e0","#f4ebe2","#f8eee5","#f9eedc","#faeed3","#faeecb","#fbeec2","#fceeba","#fdeeb1","#fded9a","#feec83","#feeb6b","#ffea54","#ffe93d","#ffe926"],o=m=>{let $=parseInt(Math.max(0,Math.min(m/3e3,1))*(l.length-1));return l[$]};function a(m){alert(m.detail.text),console.log("?",c)}function u(m){for(const[$,P]of Object.entries(h)){let U={lux_target:P.curr_lux_target,curr_lux_target:P.curr_lux_target};b.update_spaces(d,$,i,U),P.lux_target=P.curr_lux_target}}function f(m){return m?b.get_spaces(d,i):Promise.resolve()}function s(m,$){function P(){$ in h||(h[$]=m)}return P}let c,i,d,b;const h={};function T(m){N[m?"unshift":"push"](()=>{b=m,n(3,b)})}function E(m){c=m,n(0,c)}function C(m){d=m,n(2,d)}function y(m){i=m,n(1,i)}function q(m,$){m[$][1].curr_lux_target=this.innerHTML,n(4,r),n(0,c)}return e.$$.update=()=>{e.$$.dirty&1&&n(4,r=f(c))},[c,i,d,b,r,o,a,u,s,T,E,C,y,q]}class Xe extends ae{constructor(t){super(),ie(this,t,We,Qe,re,{})}}new Xe({target:document.getElementById("app")});
